<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div style="height: 500px">
有关pm2的单子 具体的详情
    <div style="height: 100px; width: 100%; border: solid red 1px;">
        <button class="button0"> list</button>
        <button class="button1"> add</button>
        <button class="button2"> 修改</button>
        <button class="button3"> 删除</button>
        <button class="button4"> 详情</button>
    </div>

</div>

</body>
<script>
    let baseUrl = `http://127.0.0.1:3000/`
    // let module1 = 'record'
    // let module1 = 'dw-work-type'
    let module1 = 'record-work'
    let id = 710



        // list-------

    let button0 = document.getElementsByClassName('button0')[0]
    button0.addEventListener('click', () => {
        console.log('-list view')
        let data = {
            start: 20220601,
            end: 20220701,
        }
        fetch(`${baseUrl}${module1}/list`, {
            method: 'post',
            data: data,
        }).then(response => {
            console.log('响应', response)
        })
    })

    // 添加
    let button1 = document.getElementsByClassName('button1')[0]
    button1.addEventListener('click', () => {
        let arr = []
        for (let i = 0; i < 3; i++) {
            let n = 30;
            let r = Math.floor(Math.random() * Math.floor(n));
            let n0 = 12;
            let r0 = Math.floor(Math.random() * Math.floor(n0));
            let n1 = 1000;
            let r1 = Math.floor(Math.random() * Math.floor(n1));
            let n2 = 100;
            let r2 = Math.floor(Math.random() * Math.floor(n2));
            let n3 = 20;
            let r3 = Math.floor(Math.random() * Math.floor(n3));
            let item = {
                id: r,
                description: "xxxxxx任务描述",
                duration: r0,
                pm2id: r1,
                record_id: r2,
                type_id: r3,
            };
            arr.push(item)

        }
        fetch(`${baseUrl}${module1}`, {
            method: 'post',
            body: JSON.stringify(arr),
            headers: {'Content-Type': 'application/json'},
        }).then(response => {
            console.log('响应', response)
        })
    })

    // 修改
    let button2 = document.getElementsByClassName('button2')[0]
    button2.addEventListener('click', () => {
        console.log('-----修改-----')
        let n1 = 1000;
        let r1 = Math.floor(Math.random() * Math.floor(n1));
        let p = {
            description: `${r1}任务recomd-修改成功`,
            id: id,
        }
        fetch(`${baseUrl}${module1}`, {
            method: 'put',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(p),
        }).then(response => {
            console.log('响应', response)
        })
    })

    // 删除
    let button3 = document.getElementsByClassName('button3')[0]
    button3.addEventListener('click', () => {
        console.log('-----删除-----')
        fetch(`${baseUrl}${module1}`, {
            method: 'delete',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({id: id}),
        }).then(response => {
            console.log('响应', response)
        })
    })

    // 详情
    let button4 = document.getElementsByClassName('button4')[0]
    button4.addEventListener('click', () => {
        fetch(`${baseUrl}${module1}/${id}`, {
            method: 'get',
        }).then(response => {
            console.log('响应', response)
        })
    })

    /***************************************   **********************************************************************************/


</script>
</html>